package  {	import flash.display.Sprite;	import flash.events.Event;	import flash.events.MouseEvent;	import com.greensock.TweenMax;	import com.greensock.TimelineLite;	import com.greensock.easing.Quint;	import com.greensock.plugins.TweenPlugin; 	import com.greensock.plugins.BlurFilterPlugin;	import com.rindra.utils.VP;	import com.rindra.events.VPEvent;		public class Expanded extends Sprite {		private var anime:Anime;		private var vp:VP;		private var vpReady:Boolean = false;		private var firstRollOver:Boolean = false;				public function Expanded() {			addEventListener(Event.ADDED_TO_STAGE, _init);		}				private function _init($e:Event):void{			anime = new Anime();			anime.collapse_btn.buttonMode = anime.exit_btn.buttonMode = true;						anime.addEventListener(MouseEvent.MOUSE_DOWN, _trackAllClicks);			anime.collapse_btn.addEventListener(MouseEvent.MOUSE_DOWN, _collapseBanner);			anime.exit_btn.addEventListener(MouseEvent.MOUSE_DOWN, _exitLogo);						addChild(anime);						TweenPlugin.activate([BlurFilterPlugin]);			intro();		}				private function intro():void{			for(var i:uint; i<anime.numChildren; i++){				anime.getChildAt(i).alpha = (anime.getChildAt(i).name != 'bg')?0:1;			}			var t:TimelineLite = new TimelineLite({onComplete:_showVideo});			t.insert(TweenMax.to(anime.greenbar, 1, {startAt:{y:-110, alpha:1}, y:0, ease:Quint.easeOut}));			t.insert(TweenMax.to(anime.bluebar, 1, {startAt:{y:40, alpha:1}, y:0, ease:Quint.easeOut}));			//t.insert(TweenMax.to(anime.product, 2, {startAt:{x:-970, alpha:1, blurFilter:{blurX:100}}, x:0, blurFilter:{blurX:0}, ease:Quint.easeOut}), .6);			t.insert(TweenMax.to(anime.copy, 1, {alpha:1, ease:Quint.easeOut}), .6);			t.insert(TweenMax.to(anime.video, 1, {alpha:1, ease:Quint.easeOut}), .6);		}				private function _showVideo():void{			vp = new VP("400x225", "rtmp://cp33413.edgefcs.net/ondemand/cs/mp4:2012/crest/crest-v0.mp4", false, false, true, true, true);			anime.video.buttonMode = true;			//vp.help();			vp.addEventListener(VPEvent.VIDEO_START, _onVideoStart);			anime.video.addEventListener(MouseEvent.MOUSE_OUT, function():void{ TweenMax.killAll(); });			anime.video.addChild(vp);		}				private function _rewindAndUnmute($e:MouseEvent):void{			if(!firstRollOver){				TweenMax.to(anime, .5, {onComplete:function():void{						 	vp.ns.seek(0);							vp.makeSoundOn();							firstRollOver = true;						 }});			}		}				private function _onVideoStart($e:VPEvent):void{			if(!vpReady){				vpReady = true;				vp.addEventListener(VPEvent.VIDEO_COMPLETE, _trackVideoComplete);				vp.addEventListener(VPEvent.VIDEO_REPLAY, _trackVideoReplay);				anime.video.addEventListener(MouseEvent.MOUSE_OVER, _rewindAndUnmute);			}		}				private function _trackVideoComplete($e:VPEvent):void{			//Put code for tracking video complete here.		}				private function _trackVideoReplay($e:VPEvent):void{			//Put code for tracking video replay here.		}				private function _trackAllClicks($e:MouseEvent):void{			//Put code for tracking all clicks here.		}				private function _collapseBanner($e:MouseEvent):void{			//Put code for closing banner here.			try{ vp.closeStream(); }catch(e:Error){}		}				private function _exitLogo($e:MouseEvent):void{			//Put code for CTA here.		}	}	}